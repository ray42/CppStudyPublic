#CC = g++ -std=c++11
CC = g++ -std=c++1y
CFLAGS =  -c -Wall -DDEBUG -g
LDFLAGS =

P1_BASE = ch13_2_test
P2_BASE = ch13_3_test
P3_BASE = ch13_4_test
P4_BASE = ch13_5_test
E2_BASE = ch13_e2

#COMMON_SOURCES = ch04_p3_median.cpp
COMMON_SOURCES =

P1_SOURCES = $(P1_BASE).cpp
P2_SOURCES = $(P2_BASE).cpp
P3_SOURCES = $(P3_BASE).cpp
P4_SOURCES = $(P4_BASE).cpp
E2_SOURCES = $(E2_BASE).cpp


COMMON_OBJECTS = $(COMMON_SOURCES:.cpp=.o)
P1_OBJECTS = $(P1_SOURCES:.cpp=.o)
P2_OBJECTS = $(P2_SOURCES:.cpp=.o)
P3_OBJECTS = $(P3_SOURCES:.cpp=.o)
P4_OBJECTS = $(P4_SOURCES:.cpp=.o)
E2_OBJECTS = $(E2_SOURCES:.cpp=.o)


P1_EXECUTABLE = $(P1_BASE)
P2_EXECUTABLE = $(P2_BASE)
P3_EXECUTABLE = $(P3_BASE)
P4_EXECUTABLE = $(P4_BASE)
E2_EXECUTABLE = $(E2_BASE)


#.PHONY: all target tests

all: $(P1_EXECUTABLE) $(P2_EXECUTABLE) $(P3_EXECUTABLE) $(P4_EXECUTABLE) $(E2_EXECUTABLE)

#P1: $(P1_EXECUTABLE)

#P2: $(P2_EXECUTABLE)

$(P1_EXECUTABLE): $(COMMON_OBJECTS) $(P1_OBJECTS)
	$(CC) $(LDFLAGS) $^ -o $@

$(P2_EXECUTABLE): $(COMMON_OBJECTS) $(P2_OBJECTS)
	$(CC) $(LDFLAGS) $^ -o $@

$(P3_EXECUTABLE): $(COMMON_OBJECTS) $(P3_OBJECTS)
	$(CC) $(LDFLAGS) $^ -o $@

$(P4_EXECUTABLE): $(COMMON_OBJECTS) $(P4_OBJECTS)
	$(CC) $(LDFLAGS) $^ -o $@

$(E2_EXECUTABLE): $(COMMON_OBJECTS) $(E2_OBJECTS)
	$(CC) $(LDFLAGS) $^ -o $@


.cpp.o:
	$(CC) $(CFLAGS) $< -o $@

clean:
	rm -rf *.o $(P1_EXECUTABLE) $(P2_EXECUTABLE) $(P3_EXECUTABLE) $(P4_EXECUTABLE) $(E2_EXECUTABLE)

